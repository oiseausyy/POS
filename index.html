<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ß‡∏á‡πÅ‡∏ï‡∏Å Card Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a1a1a;
            --surface-color: #2c2c2c;
            --primary-color: #e74c3c;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --text-color: #ecf0f1;
            --border-color: #444;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Kanit', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background: var(--surface-color);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        /* --- Setup Screen --- */
        #setup-screen h1 {
            color: var(--primary-color);
            font-weight: 900;
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        #setup-screen p {
            margin-bottom: 25px;
            font-size: 1.1em;
            color: #bdc3c7;
        }

        #player-inputs .player-input-group {
            display: flex;
            margin-bottom: 12px;
        }

        #player-inputs input {
            flex-grow: 1;
            padding: 12px;
            border: 2px solid var(--border-color);
            background-color: #333;
            border-radius: 8px 0 0 8px;
            font-family: 'Kanit', sans-serif;
            color: var(--text-color);
            font-size: 1em;
        }

        #player-inputs button {
            padding: 0 15px;
            border: 2px solid var(--border-color);
            border-left: none;
            background: #c0392b;
            color: white;
            cursor: pointer;
            border-radius: 0 8px 8px 0;
            font-size: 1.2em;
        }

        .action-buttons button {
            padding: 12px 25px;
            font-size: 1.2em;
            font-family: 'Kanit', sans-serif;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 10px;
        }

        #add-player-btn {
            background-color: var(--secondary-color);
            color: white;
            margin-right: 10px;
        }
        
        #start-game-btn {
            background-color: var(--success-color);
            color: white;
        }

        /* --- Game Screen --- */
        #game-screen {
            display: none;
            flex-direction: column;
            align-items: center;
        }

        #player-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .player-tag {
            background-color: #444;
            padding: 5px 15px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .player-tag.active {
            background-color: var(--primary-color);
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--primary-color);
        }
        
        #turn-indicator {
             margin-bottom: 20px;
             font-size: 1.3em;
        }

        #card-area {
            width: 300px;
            height: 420px;
            perspective: 1000px;
            margin-bottom: 20px;
        }
        
        #card-display {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        
        #card-display.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .card-back {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            font-size: 3em;
            font-weight: 900;
        }
        
        .card-front {
            background-color: #fff;
            color: #333;
            transform: rotateY(180deg);
            flex-direction: column;
            padding: 20px;
            border: 5px solid var(--border-color);
        }

        #card-title {
            font-weight: 900;
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        
        #card-description {
            font-size: 1.1em;
        }
        
        /* Card Type Colors */
        .card-front.type-action { border-color: #3498db; }
        .card-front.type-changer { border-color: #2ecc71; }
        .card-front.type-activity { border-color: #f1c40f; }
        .card-front.type-duel { border-color: #9b59b6; }
        
        .game-button {
            padding: 15px 40px;
            font-size: 1.5em;
            font-family: 'Kanit', sans-serif;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        #draw-card-btn {
            background-color: var(--primary-color);
            color: white;
        }
        
        #next-turn-btn {
            background-color: var(--success-color);
            color: white;
            display: none; /* Hidden by default */
        }
        
        #rules-display {
            margin-top: 25px;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        
        #rules-display h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        #rules-display ul {
            list-style: none;
            padding: 0;
            text-align: left;
        }
        
        #rules-display li {
             margin-bottom: 5px;
        }

    </style>
</head>
<body>

    <div class="container">
        <div id="setup-screen">
            <h1>‡∏ß‡∏á‡πÅ‡∏ï‡∏Å</h1>
            <p>‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏á‡πÄ‡∏´‡∏•‡πâ‡∏≤...‡∏ó‡∏µ‡πà‡∏Å‡∏é‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πå‡∏î!</p>
            <div id="player-inputs">
                <div class="player-input-group"><input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 1"></div>
                <div class="player-input-group"><input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 2"></div>
            </div>
            <div class="action-buttons">
                <button id="add-player-btn">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</button>
                <button id="start-game-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!</button>
            </div>
        </div>

        <div id="game-screen">
            <div id="player-list"></div>
            <div id="turn-indicator"></div>
            <div id="card-area">
                <div id="card-display">
                    <div class="card-face card-back">‡∏ß‡∏á‡πÅ‡∏ï‡∏Å</div>
                    <div class="card-face card-front">
                        <h2 id="card-title">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î</h2>
                        <p id="card-description">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</p>
                    </div>
                </div>
            </div>
            <button id="draw-card-btn" class="game-button">‡∏à‡∏±‡πà‡∏ß‡∏Å‡∏≤‡∏£‡πå‡∏î!</button>
            <button id="next-turn-btn" class="game-button">‡∏ï‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
            <div id="rules-display">
                <h3>‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å (‡∏ú‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà ‡πÇ‡∏î‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!)</h3>
                <ul>
                    <li>1. üíÄ ‡∏´‡πâ‡∏≤‡∏°‡∏à‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
                    <li>2. üíÄ ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô (‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏ó‡∏ô)</li>
                    <li>3. üíÄ ‡∏´‡πâ‡∏≤‡∏°‡∏û‡∏π‡∏î‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏î‡∏∑‡πà‡∏°" ‡∏´‡∏£‡∏∑‡∏≠ "‡πÄ‡∏°‡∏≤"</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const allCards = [
            // Action Cards
            { name: "‡∏Å‡∏£‡∏£‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏ô‡∏≠‡∏á", description: "‡∏à‡∏±‡πà‡∏ß‡πÑ‡∏î‡πâ‡∏Å‡πá‡πÇ‡∏î‡∏ô‡πÄ‡∏≠‡∏á‡πÑ‡∏õ‡πÄ‡∏•‡∏¢ 1 ‡∏Å‡∏£‡∏∂‡πä‡∏ö!", type: "action" },
            { name: "‡∏ä‡∏µ‡πâ‡∏ä‡∏∞‡∏ï‡∏≤", description: "‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏¢‡∏°‡∏ö‡∏≤‡∏•! ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏ô‡∏°‡∏≤‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏ó‡∏ô‡∏Ñ‡∏∏‡∏ì", type: "action" },
            { name: "‡∏™‡∏≤‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏µ‡∏Ñ‡∏∑‡∏≠‡∏û‡∏•‡∏±‡∏á", description: "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û! ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏ß‡∏á‡πÇ‡∏î‡∏ô‡∏Ñ‡∏ô‡∏•‡∏∞ 1 ‡∏Å‡∏£‡∏∂‡πä‡∏ö", type: "action" },
            { name: "‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤‡∏™‡∏∞‡πÄ‡∏ó‡∏∑‡∏≠‡∏ô", description: "‡∏Ñ‡∏ô‡∏ô‡∏±‡πà‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏ß‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÇ‡∏î‡∏ô‡∏Ñ‡∏ô‡∏•‡∏∞ 1 ‡∏Å‡∏£‡∏∂‡πä‡∏ö", type: "action" },
            { name: "‡∏ô‡πâ‡∏≥‡∏ï‡∏Å", description: "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏¢‡∏Å ‡∏Ñ‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏´‡πâ‡∏≤‡∏°‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î", type: "action" },
            { name: "‡∏û‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏ô‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πá‡∏Å", description: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏¢‡∏∏‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á ‡πÇ‡∏î‡∏ô‡∏Ñ‡∏ô‡∏•‡∏∞ 1 ‡∏Å‡∏£‡∏∂‡πä‡∏ö", type: "action" },
            { name: "‡∏Ñ‡∏ô‡πÇ‡∏™‡∏î‡πÇ‡∏õ‡∏£‡∏î‡∏ó‡∏£‡∏≤‡∏ö", description: "‡πÉ‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÇ‡∏™‡∏î‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ... ‡πÇ‡∏î‡∏ô!", type: "action" },
            { name: "‡∏Ñ‡∏ô‡∏°‡∏µ‡∏Ñ‡∏π‡πà‡∏ä‡∏π‡πâ‡∏ä‡∏∑‡πà‡∏ô", description: "‡πÉ‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏ü‡∏ô‡πÅ‡∏•‡πâ‡∏ß... ‡πÇ‡∏î‡∏ô! (‡∏Ç‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏°‡∏±‡πà‡∏ô‡πÑ‡∏™‡πâ)", type: "action" },

            // Game Changer Cards
            { name: "‡∏£‡∏≤‡∏ä‡∏≤", description: "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏é‡πÉ‡∏´‡∏°‡πà 1 ‡∏Ç‡πâ‡∏≠ ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ñ‡∏∂‡∏á‡∏ï‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÉ‡∏Ñ‡∏£‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô‡πÇ‡∏î‡∏ô!", type: "changer" },
            { name: "‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô", description: "‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ ‡πÉ‡∏ä‡πâ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÅ‡∏ï‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏∞!)", type: "changer" },
            { name: "‡∏ô‡∏±‡∏Å‡∏õ‡∏è‡∏¥‡∏ß‡∏±‡∏ï‡∏¥", description: "‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏∞‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!", type: "changer" },
            { name: "‡∏Ç‡πâ‡∏≤‡∏°‡∏ï‡∏≤", description: "‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡πÑ‡∏õ! ‡∏ï‡∏≤‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏≠‡∏î ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏∞‡∏≠‡∏î‡πÄ‡∏•‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢", type: "changer" },

            // Activity Cards
            { name: "Topic ‡∏£‡πâ‡∏≠‡∏ô", description: "‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÄ‡∏ä‡πà‡∏ô '‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå') ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏•‡πà‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡∏•‡∏∞‡∏Ñ‡∏ô ‡πÉ‡∏Ñ‡∏£‡∏ï‡∏≠‡∏ö‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏¥‡∏î‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÉ‡∏ô 5 ‡∏ß‡∏¥... ‡πÇ‡∏î‡∏ô!", type: "activity" },
            { name: "‡∏ô‡∏±‡∏Å‡πÄ‡∏•‡πà‡∏≤..‡∏ô‡∏±‡∏Å‡∏≠‡∏≤‡∏¢", description: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏≠‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏°‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏∂‡∏á ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡πÄ‡∏•‡πà‡∏≤ ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏ß !", type: "activity" },
            { name: "‡∏ï‡∏ö‡πÇ‡∏ï‡πä‡∏∞", description: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏¥‡∏î ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡∏ï‡∏ö‡πÇ‡∏ï‡πä‡∏∞! ‡πÉ‡∏Ñ‡∏£‡∏ï‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢... ‡πÇ‡∏î‡∏ô!", type: "activity" },
            { name: "Truth or Dare", description: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ß‡∏á 1 ‡∏Ñ‡∏ô ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡πâ‡∏≤!! ‡∏ñ‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á (Truth): ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏≤‡∏°‡∏ô‡∏±‡πâ‡∏ô '‡∏à‡∏£‡∏¥‡∏á' ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å '‡∏Å‡∏•‡πâ‡∏≤' (Dare): ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ó‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢", type: "activity" },
            
            // Duel Cards
            { name: "‡∏®‡∏∂‡∏Å‡πÇ‡∏≠-‡∏™‡πâ‡∏°", description: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏π‡πà‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ 1 ‡∏Ñ‡∏ô ‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô '‡πÇ‡∏≠-‡∏™‡πâ‡∏°' ‡∏Å‡∏±‡∏ô... ‡πÉ‡∏Ñ‡∏£‡πÅ‡∏û‡πâ‡πÇ‡∏î‡∏ô!", type: "duel" },
            { name: "‡∏î‡∏ß‡∏•‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡∏ß", description: "‡∏ó‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏ô ‡∏°‡∏≤‡∏ã‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô... ‡πÉ‡∏Ñ‡∏£‡∏´‡∏°‡∏î‡∏ä‡πâ‡∏≤‡∏Å‡∏ß‡πà‡∏≤... ‡πÇ‡∏î‡∏ô‡πÄ‡∏ö‡∏¥‡πâ‡∏•!", type: "duel" },
            { name: "‡πÄ‡∏õ‡πà‡∏≤‡∏¢‡∏¥‡∏á‡∏â‡∏∏‡∏ö‡∏¢‡∏°‡∏ö‡∏≤‡∏•", description: "‡∏ó‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏ô ‡πÄ‡∏õ‡πà‡∏≤‡∏¢‡∏¥‡∏á‡∏â‡∏∏‡∏ö (‡∏ä‡∏ô‡∏∞ 2 ‡πÉ‡∏ô 3)... ‡∏Ñ‡∏ô‡πÅ‡∏û‡πâ‡πÇ‡∏î‡∏ô 2 ‡∏Å‡∏£‡∏∂‡πä‡∏ö!", type: "duel" },
            { name: "‡∏à‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏´‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á", description: "‡∏ó‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏ô ‡∏°‡∏≤‡∏à‡πâ‡∏≠‡∏á‡∏ï‡∏≤... ‡πÉ‡∏Ñ‡∏£‡∏´‡∏•‡∏ö‡∏ï‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≥‡∏Å‡πà‡∏≠‡∏ô... ‡πÇ‡∏î‡∏ô!", type: "duel" },
        ];

        let players = [];
        let deck = [];
        let currentPlayerIndex = 0;

        const setupScreen = document.getElementById('setup-screen');
        const gameScreen = document.getElementById('game-screen');
        const addPlayerBtn = document.getElementById('add-player-btn');
        const startGameBtn = document.getElementById('start-game-btn');
        const playerInputsContainer = document.getElementById('player-inputs');
        const playerListDiv = document.getElementById('player-list');
        const turnIndicator = document.getElementById('turn-indicator');
        const cardDisplay = document.getElementById('card-display');
        const drawCardBtn = document.getElementById('draw-card-btn');
        const cardTitle = document.getElementById('card-title');
        const cardDescription = document.getElementById('card-description');
        const cardFront = document.querySelector('.card-front');
        
        // **** START: JAVASCRIPT CHANGE ****
        const nextTurnBtn = document.getElementById('next-turn-btn');
        // **** END: JAVASCRIPT CHANGE ****

        // --- SETUP LOGIC ---
        addPlayerBtn.addEventListener('click', () => {
            if (playerInputsContainer.children.length >= 8) return;
            const newPlayerInput = document.createElement('div');
            newPlayerInput.className = 'player-input-group';
            newPlayerInput.innerHTML = `<input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô ${playerInputsContainer.children.length + 1}"><button onclick="this.parentElement.remove()">-</button>`;
            playerInputsContainer.appendChild(newPlayerInput);
        });

        startGameBtn.addEventListener('click', () => {
            players = Array.from(document.querySelectorAll('#player-inputs input'))
                .map(input => input.value.trim())
                .filter(name => name);

            if (players.length < 2) {
                alert('‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏Ñ‡∏ô‡∏ô‡∏∞!');
                return;
            }

            setupScreen.style.display = 'none';
            gameScreen.style.display = 'flex';
            initGame();
        });
        
        // --- GAME LOGIC ---
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function initGame() {
            deck = [...allCards];
            shuffle(deck);
            currentPlayerIndex = Math.floor(Math.random() * players.length);
            updatePlayerList();
            updateTurnUI();
        }

        // **** START: JAVASCRIPT LOGIC CHANGE ****
        drawCardBtn.addEventListener('click', () => {
            if (deck.length === 0) {
                alert('‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏´‡∏°‡∏î‡∏™‡∏≥‡∏£‡∏±‡∏ö! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà...');
                deck = [...allCards];
                shuffle(deck);
            }

            const card = deck.pop();
            
            drawCardBtn.style.display = 'none'; // Hide draw button
            nextTurnBtn.style.display = 'inline-block'; // Show next turn button
            
            cardDisplay.classList.add('flipped');

            setTimeout(() => {
                cardTitle.textContent = card.name;
                cardDescription.textContent = card.description;
                cardFront.className = 'card-face card-front'; // Reset classes
                cardFront.classList.add(`type-${card.type}`);
            }, 300); // Update content mid-flip
        });

        nextTurnBtn.addEventListener('click', () => {
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            updateTurnUI();
            
            cardDisplay.classList.remove('flipped');
            
            nextTurnBtn.style.display = 'none'; // Hide next turn button
            drawCardBtn.style.display = 'inline-block'; // Show draw button
        });
        // **** END: JAVASCRIPT LOGIC CHANGE ****

        function updatePlayerList() {
            playerListDiv.innerHTML = '';
            players.forEach((name, index) => {
                const tag = document.createElement('div');
                tag.className = 'player-tag';
                tag.id = `player-tag-${index}`;
                tag.textContent = name;
                playerListDiv.appendChild(tag);
            });
        }
        
        function updateTurnUI() {
            turnIndicator.textContent = `‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á... ${players[currentPlayerIndex]}`;
            document.querySelectorAll('.player-tag').forEach(tag => tag.classList.remove('active'));
            document.getElementById(`player-tag-${currentPlayerIndex}`).classList.add('active');
        }

    </script>
</body>
</html>